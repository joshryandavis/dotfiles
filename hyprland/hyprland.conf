# Hyprland Config

#############################################
# Display

$main_monitor = DP-1
monitor=$main_monitor,preferred,auto,auto

#############################################
# Execs
#############################################

exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = sh ~/.config/hypr/scripts/start.sh &
exec-once = sh ~/.config/hypr/scripts/wallpaper.sh ~/wallpapers &

#############################################
# Environment Variables
#############################################

# General
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_QPA_PLATFORMTHEME,qt6ct
# env = GTK_THEME,WhiteSur-dark:darker
env = XCURSOR_THEME,"WhiteSur Cursors"
env = XCURSOR_SIZE,22
env = GDK_BACKEND,wayland,x11
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = MOZ_ENABLE_WAYLAND,1
env = MOZ_DISABLE_RDD_SANDBOX,1
env = _JAVA_AWT_WM_NONREPARENTING=1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_QPA_PLATFORM,wayland
env = XDG_SESSION_TYPE,wayland

# Nvidia specific
env = LIBVA_DRIVER_NAME,nvidia
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1 # required for cursors
env = __NV_PRIME_RENDER_OFFLOAD,1 # ok
env = __VK_LAYER_NV_optimus,NVIDIA_only # ok
env = PROTON_ENABLE_NGX_UPDATER,1
env = NVD_BACKEND,direct # ok
env = __GL_VRR_ALLOWED,1 # ok
env = WLR_DRM_NO_ATOMIC,1 # ok?
env = WLR_USE_LIBINPUT,1 # ok
env = XWAYLAND_NO_GLAMOR,1 # ok
env = __GL_MaxFramesAllowed,1 # ok
env = WLR_RENDERER_ALLOW_SOFTWARE,1 # ok
env = __GL_SYNC_TO_VBLANK,1
# env = __GL_FSAA_MODE,5
# env = __GL_LOG_MAX_ANISO,0
# env = __GL_THREADED_OPTIMIZATIONS,1 # breaks wayland apps
# env = WLR_DRM_NO_MODIFIERS,1 # breaks hyprland
# env = __NV_PRIME_RENDER_OFFLOAD_PROVIDER,NVIDIA-G0

#############################################
# Animations
#############################################

$base_speed = 3
$fade_speed = $base_speed 
$workspace_animation_speed = $base_speed 
$window_animation_speed = $base_speed 
$border_animation_speed = $base_speed 

animations {
    enabled=1
    bezier=overshot,0.13,0.99,0.29,1.1
    animation=windows,1,$window_animation_speed,overshot,slide
    animation=border,1,$border_animation_speed,default
    animation=fade,1,$fade_speed,default
    animation=workspaces,1,$workspace_animation_speed,overshot,slide
}

#############################################
# General
#############################################

general {
    gaps_in=10
    gaps_out=20
    border_size=4
    col.active_border=rgba(cba6f7ff) rgba(89b4faff) rgba(94e2d5ff) 10deg
    col.inactive_border=0xff45475a
}

misc {
    force_default_wallpaper = 0 # Set to 0 to disable the anime mascot wallpapers
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

#############################################
# Decorations
#############################################

decoration {
    drop_shadow = true
    shadow_range=100
    shadow_render_power=3
    col.shadow= 0x33000000
    col.shadow_inactive=0x22000000
    rounding=0
    blur {
        enabled = true
        size = 3
        passes = 1
        new_optimizations = true
    }
}

#############################################
# Layouts
#############################################

master {
    new_is_master = false
}

dwindle {
    pseudotile = yes # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = yes # you probably want this
}

#############################################
# Workspaces
#############################################

# Workspace binding
workspace=1, monitor:$main_monitor
workspace=2, monitor:$main_monitor
workspace=3, monitor:$main_monitor
workspace=4, monitor:$main_monitor

# Window Rules
windowrule = workspace 1 silent,code-url-handler
windowrule = workspace 1 silent,Alacritty
windowrule = workspace 2 silent,firefox
windowrule = workspace 3 silent,thunderbird
windowrule = workspace 4 silent,teams-for-linux
windowrule = workspace 5 silent,WebCord
windowrule = workspace 6 silent,Cider

#############################################
# Windows
#############################################

# custom classes to attach window to workspace
# windowrulev2 = workspace 3 silent,class:^(wp-3)$
# windowrulev2 = workspace 4 silent,class:^(wp-4)$
# windowrulev2 = workspace 5 silent,class:^(wp-5)$
# windowrulev2 = workspace 6 silent,class:^(wp-6)$

# firefox Picture-in-Picture
windowrulev2 = float,class:^(firefox)$,title:^(Picture-in-Picture)$
windowrulev2 = pin,class:^(firefox)$,title:^(Picture-in-Picture)$\
windowrulev2 = nofullscreenrequest,class:^(firefox)$,title:^(Picture-in-Picture)$\

windowrule = float,title:^(Confirm to replace files)$
windowrule = float,title:^(File Operation Progress)$

windowrule = center,^(task-floating)$
windowrule = float,^(task-floating)$
windowrule = dimaround,^(task-floating)$
windowrule = noborder,^(task-floating)$

windowrule = center,pavucontrol
windowrule = float,pavucontrol

windowrulev2 = center,class:^(jetbrains-toolbox)$,title:^(JetBrains Toolbox)

# Network manager applet
windowrulev2 = center,class:^(nm-applet)$,title:^(nm-applet)

# IntelliJ IDEA pop up windows
windowrulev2 = float,class:^(jetbrains-idea)$,title:^(win[0-9]+)$

# Float pol auth agent
windowrulev2 = float,class:^(org.kde.polkit-kde-authentication-agent-1)$,

# Open file / open folder dialogs
windowrulev2 = float,,title:^(Open File)$
windowrulev2 = float,,title:^(Open Files)$
windowrulev2 = float,,title:^(Open Folder)$
windowrulev2 = float,,title:^(Open)$
windowrulev2 = float,,title:^(Choose Files)$
windowrulev2 = float,,title:^(Choose Folder)$
windowrulev2 = float,,title:^(Save As)$

# Float bitwarden
# windowrulev2 = float,,class:^(Bitwarden)$

#############################################
# Devices
#############################################

# device:epic-mouse-v1 {
#     sensitivity = -0.5
# }

#############################################
# Input
#############################################

input {
    kb_layout = us
    # kb_variant =
    # kb_model =
    # kb_options =
    # kb_rules =

    follow_mouse = 1
    natural_scroll = true

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

#############################################
# Gestures
#############################################

gestures {
    workspace_swipe = true
}

#############################################
# Binds
#############################################

# Modkey
$mainMod = SUPER
# General
bind = $mainMod, Q, exec, sh ~/.config/hypr/scripts/killactive.sh
bind = $mainMod, M, exit,
bind = $mainMod, E, exec, Thunar
bind = $mainMod, G, togglefloating,
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindlen
bind = $mainMod, B, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle
bind = $mainMod, F, fullscreen,
# Move focus
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d
bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
# Scroll through existing workspaces with mainMod + scroll
# bind = $mainMod, mouse_down, workspace, e+1
# bind = $mainMod, mouse_up, workspace, e-1
# Next workspace on monitor
# bind = $mainMod, right, workspace, m+1
# bind = $mainMod, left, workspace, m-1
# Lock the screen with mainMod + L
bind = $mainMod, L, exec, swaylock
# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
# Reload the config with mainMod + SHIFT + R
bind = $mainMod SHIFT, R, exec, hyprctl reload && sh ~/.config/hypr/scripts/start.sh
# Open wofi with mainMod + d (drun) and mainMod + SHIFT + d (run)
bind = $mainMod, d, exec, wofi --show drun
bind = $mainMod SHIFT, d, exec, wofi --show run
# Open terminal with mainMod + ENTER
bind = $mainMod, RETURN, exec, sh ~/.config/hypr/scripts/term.sh
# Open config with mainMod + SHIFT + C
bind = $mainMod SHIFT, C, exec, code ~/dotfiles
# Media/fn buttons
binde=,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
binde =,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind =,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind =,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
binde =,XF86MonBrightnessUp, exec, brightnessctl s 10%+
binde =,XF86MonBrightnessDown, exec, brightnessctl s 10%-
bind =,XF86AudioPlay, exec, playerctl play-pause
bind =,XF86AudioPrev, exec, playerctl previous
bind =,XF86AudioNext, exec, playerctl next
bind = $mainMod, F1, exec, brightnessctl s 10%- && notify-send -a Hyprland -t 3500 "Brightness: $(brightnessctl g)"
bind = $mainMod, F2, exec, brightnessctl s 10%+ && notify-send -a Hyprland -t 3500 "Brightness: $(brightnessctl g)"
# Gamemode
# bind = $mainMod, F1, exec, ~/.config/hypr/scripts/gamemode
# Mouse side buttons
# bind=,mouse:275,exec,wl-copy $(wl-paste -p) # copy selected text
# bind=,mouse:276,exec,wtype -M ctrl -M shift v -m ctrl -m shift # paste by Ctrl+Shift+v
# exit mode
# bind=SUPER,escape,exec,hyprctl dispatch submap logout; notify-send -a Hyprland -t 3500 $'\ne - exit\n\nr - reboot\n\ns - suspend\n\nS - poweroff\n\nl - lock' -i /usr/share/icons/breeze-dark/actions/32/system-suspend.svg
# submap=logout
# bindr =,E,exec,~/.config/hyprland/exit.sh &
# bindr =,S,exec,hyprctl dispatch submap reset && systemctl suspend
# bindr =,R,exec,systemctl reboot
# bindr =SHIFT,S,exec,systemctl poweroff -i
# bindr =,L,exec,hyprctl dispatch submap reset && swaylock
# bindr=,escape,submap,reset
# bind=,Return,submap,reset
# submap=reset
# MacOS style cmd+c/v/x/z/y/w/q
bind = $mainMod, c, exec, wtype -M ctrl c
bind = $mainMod, v, exec, wtype -M ctrl v
bind = $mainMod, x, exec, wtype -M ctrl x
bind = $mainMod, z, exec, wtype -M ctrl z
bind = $mainMod, y, exec, wtype -M ctrl y
bind = $mainMod, w, exec, wtype -M ctrl w
bind = $mainMod, s, exec, wtype -M ctrl s
